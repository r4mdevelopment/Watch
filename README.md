# Watch ‚Äì –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –æ–Ω–ª–∞–π–Ω-–∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä–∞

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é full-stack —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –æ–Ω–ª–∞–π–Ω-–∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä–∞, –≤–∫–ª—é—á–∞—é—â—É—é:

- **FastAPI backend**
- **Vanilla JS + HTML/CSS frontend**
- **PostgreSQL database**
- **JWT authentication (HS256 + individual password salts)**
- **Docker Compose**
- **Locust load testing**

---

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### **Backend (FastAPI)**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
  - –ü–∞—Ä–æ–ª–∏ —Ö—ç—à–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ Passlib (`bcrypt`)  
  - JWT-—Ç–æ–∫–µ–Ω—ã –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è **HS256**  
  - –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **—É–Ω–∏–∫–∞–ª—å–Ω–∞—è —Å–æ–ª—å**, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–∞—è Passlib  
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∏–ª—å–º–æ–≤, –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–æ–¥–±–æ—Ä–∫–∏, –ø–æ–∏—Å–∫  
- –°–∏—Å—Ç–µ–º–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ  
- –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤  
- –°–∏—Å—Ç–µ–º–∞ –æ—Ç–∑—ã–≤–æ–≤ –∏ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤  
- –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ (`pytest`)

### **Frontend**
- –ù–∞ —á–∏—Å—Ç–æ–º JS –±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤  
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ø—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ä—Ç–æ—á–µ–∫ —Ñ–∏–ª—å–º–æ–≤  
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ  
- –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤  
- –û—Ç–∑—ã–≤—ã + –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞  
- –ú–æ–¥—É–ª—å–Ω—ã–π UI (—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥)

### **Load testing**
- –ü–∞–ø–∫–∞ `locust/`  
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ API  
- –ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `WatchUser`  
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ backend —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å–Ω–æ–µ –∏–º—è Docker: `http://backend:8000`

---

## üê≥ Docker Compose

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ 3 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö:

```
backend      ‚Üí FastAPI + Uvicorn
frontend     ‚Üí Nginx static frontend
db           ‚Üí PostgreSQL
locust       ‚Üí Load testing dashboard
```

–°—Ç–∞—Ä—Ç –ø—Ä–æ–µ–∫—Ç–∞:

```bash
docker compose up --build
```

Backend –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω:  
```
http://localhost:8000
```

Frontend:  
```
http://localhost:8080
```

Locust:  
```
http://localhost:8089
```

---

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –±–µ—Ä—É—Ç—Å—è –∏–∑ `.env` –≤ –∫–æ—Ä–Ω–µ:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ó–Ω–∞—á–µ–Ω–∏–µ |
|-----------|----------|
| `SECRET_KEY` | –ö–ª—é—á –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ JWT (**HS256**) |
| `PASSWORD_SALT` | –£–Ω–∏–∫–∞–ª—å–Ω–∞—è —Å–æ–ª—å –¥–ª—è —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∫ per-user salt Passlib) |
| `DATABASE_URL` | URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è PostgreSQL |
| `TMDB_API_KEY` | –ö–ª—é—á TMDB |
| `USE_TMDB_CACHE` | `true/false` ‚Äî –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è |

–ü—Ä–∏–º–µ—Ä `.env`:

```
SECRET_KEY=supersecretjwt
PASSWORD_SALT=x92jf02jf02jf0j2f
DATABASE_URL=postgresql://postgres:admin@db:5432/watch
TMDB_API_KEY=YOUR_KEY
USE_TMDB_CACHE=false
```

---

## üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```
# unit tests
pytest -v

# load testing
available after the docker build on http://localhost:8089
```

–ü–æ–∫—Ä—ã—Ç–∏–µ:

```
pytest --cov=backend
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend/
    main.py
    models.py
    database.py
    tmdb_cache.py
    cache/
frontend/
    index.html
    js/
    css/
locust/
docker-compose.yml
run.py
```

---

## ‚ú® –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ JWT-—Ç–æ–∫–µ–Ω—ã HS256  
- –î–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **bcrypt + —Å–æ–ª—å Passlib + –≥–ª–æ–±–∞–ª—å–Ω–∞—è —Å–æ–ª—å –ø—Ä–æ–µ–∫—Ç–∞**
- –í—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –ø–æ —Å–ª–æ—è–º: API ‚Üí Services ‚Üí Models ‚Üí Frontend  
- –ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é —á–µ—Ä–µ–∑ Docker

---

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
